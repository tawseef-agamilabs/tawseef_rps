<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>jQuery DataTable</title>

		<link rel="preconnect" href="https://fonts.gstatic.com" />
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700;1,900&family=Rubik:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet" />

		<!-- Bootstrap CSS -->

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous" />

		<!-- ToasterLink -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" integrity="sha256-ENFZrbVzylNbgnXx0n3I1g//2WeO47XxoPe0vkp3NC8=" crossorigin="anonymous" />

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />

		<!-- DataTable css -->
		<link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" />
		<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.3.2/css/buttons.dataTables.min.css" />
	</head>
	<body>
		<div class="container">
			<table id="myTable" class="display" style="width: 100%">
				<thead>
					<tr>
						<th>#</th>
						<th>Name</th>
						<th>Position</th>
						<th>Office</th>
						<th>Extn.</th>
						<th>Start date</th>
						<th>Salary</th>
						<th>Action</th>
						<!-- <th>#</th> -->
					</tr>
				</thead>
				<tfoot>
					<tr>
						<th>#</th>
						<th>Name</th>
						<th>Position</th>
						<th>Office</th>
						<th>Extn</th>
						<th>Start date</th>
						<th>Salary</th>
						<th>Action</th>
						<!-- <th>#</th> -->
					</tr>
				</tfoot>
			</table>
		</div>

		<!-- <div id="myModal" class="modal fade myModal" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"  id="myModalLabel">Detail Info</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">

                    </div>

                    <div class="modal-footer py-2">
                        <button type="button" class="btn btn-secondary rounded-pill px-4 shadow modalClose" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary rounded-pill px-4 shadow modalSave">Save</button>
                    </div>
                </div>
            </div>
        </div> -->

		<div id="myModal" class="modal fade" tabindex="-1" role="dialog" style="display: none" aria-hidden="true">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<form id="_modal_form">
						<div class="modal-header">
							<h5 class="modal-title">Detail Info</h5>

							<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-form-body">
							<div class="container-fluid">
								<div class="form-group input-group">
									<span class="input-group-addon" style="width: 150px">name:</span>

									<input type="text" style="width: 350" class="form-control" id="formName" />
								</div>

								<div class="form-group input-group">
									<span class="input-group-addon" style="width: 150px">position:</span>

									<input type="text" style="width: 350" class="form-control" id="formPosition" />
								</div>

								<div class="form-group input-group">
									<span class="input-group-addon" style="width: 150px">office:</span>

									<input type="text" style="width: 350" class="form-control" id="formOffice" />
								</div>
								<div class="form-group input-group">
									<span class="input-group-addon" style="width: 150px">extn:</span>

									<input type="text" style="width: 350" class="form-control" id="formExtn" />
								</div>

								<div class="form-group input-group">
									<span class="input-group-addon" style="width: 150px">start_date:</span>

									<input type="text" style="width: 350" class="form-control" id="formStartDate" />
								</div>

								<div class="form-group input-group">
									<span class="input-group-addon" style="width: 150px">salary:</span>

									<input type="text" style="width: 350" class="form-control" id="formSalary" />
								</div>
							</div>
						</div>
						<div class="modal-body"></div>
						<div class="modal-footer py-2">
							<button type="submit" class="btn btn-primary rounded-pill px-4 shadow modalClose" data-bs-dismiss="modal">Close</button>
							<button type="submit" class="btn btn-primary rounded-pill px-4 shadow modalSave" data-bs-dismiss="modal">Save</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<!-- Modal -->
		<!-- <div class="modal fade myModal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Detail Info</h4>
					</div>
					<div class="modal-body"></div>
					<div class="modal-footer"></div>
				</div>
			</div>
		</div> -->

		<!-- <div class="modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Modal title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>Modal body text goes here.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div> -->

		<!-- jquery -->
		<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

		<!--DataTable jquery-->
		<script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.3.2/js/dataTables.buttons.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.3.2/js/buttons.html5.min.js"></script>
		<script src="https://cdn.datatables.net/buttons/2.3.2/js/buttons.print.min.js"></script>

		<!-- bootstrap 5  -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

		<script>
			$(document).ready(function () {
				console.log("sdfdwd");
				$();
				function findData() {
					$.ajax({
						url: "./jsonData.json",
						method: "GET",
						type: "json",
						success: function (response) {
							//console.log(response);
							showTable(response);
							// remove the table row
							//peopleTable.row(row).data().remove();
						},
					});
				}
				findData();

				let peopleTable;

				function showTable(data) {
					let i = 1;
					peopleTable = $("#myTable").DataTable({
						dom: "Bfrtip",
						buttons: ["copy", "csv", "excel", "pdf", "print"],
						data: data.data,
						columns: [
							{
								data: null,
								render: function (data, type, row, meta) {
									return meta.row + 1;
								},
							},
							{ data: "name" },
							{ data: "position" },
							{ data: "office" },
							{ data: "extn" },
							{ data: "start_date" },
							{ data: "salary" },
							{
								data: null,
								render: function (data, type, row, meta) {
									// console.log({ data, type, row, meta });

									return `<div>
                            <button class="edit-button" data-id="${data[0]}">Edit</button>
                            <button class="delete-button" data-id="${data[0]}">Delete</button>
                        </div>`;
									// return '<button class="edit-button" data-id="' + data[0] + '">Edit</button><button class="delete-button" data-id="' + data[0] + '">Delete</button>';
								},
							},
						],
					});
					// console.log(peopleTable);
				}

				$("#myTable").on("click", ".edit-button", function () {
					// Get the data for the row to be edited
					let row = $(this).closest("tr");
					// console.log(peopleTable);
					let data = peopleTable.row(row).data();
					//let data = row.data();  // Get the data for the row
					console.log(data);

					// Show the edit form and populate it with the data

					// get the data from the nearest row
					// let name = $(this).closest("tr").find(".name").text(); // data.name;
					// let position = $(this).closest("tr").find(".position").text(); // data.position;
					// let office = $(this).closest("tr").find(".office").text(); // data.office;
					// let extn = $(this).closest("tr").find(".extn").text(); // data.extn;
					// let start_date = $(this).closest("tr").find(".start_date").text(); // data.start_date;
					// let salary = $(this).closest("tr").find(".salary").text(); // data.salary;

					let name = data.name; // data.name;
					let position = data.position;
					let office = data.office;
					let extn = data.extn;
					let start_date = data.start_date;
					let salary = data.salary;
					console.log(name);

					// let dataObject = {
					//     name, position, office, extn, start_date, salary
					// };

					// show the modal and populate the fields
					$("#myModal").modal("show");
					//$("#myModal .modal-body #name").val(name);
					$("#formName").val(name);
					$("#formPosition").val(position);
					$("#formOffice").val(office);
					$("#formExtn").val(extn);
					$("#formStartDate").val(start_date);
					$("#formSalary").val(salary);

					// $("#viewModal").modal("show");
					// // populate the modal with the data
					// $("#viewModal .modal-body #name").val(data.name);
					// $("#viewModal .modal-body #email").val(data.email);
					// $("#viewModal .modal-body #phone").val(data.phone);
				});
			});
		</script>

		<!-- <script src="./js/script.js"></script> -->
	</body>
</html>
